<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PdM-Manager | Dashboard</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <!-- Chart.js -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="logo-container">
          <i class="fas fa-cogs logo-icon"></i>
          <h5 class="logo-text">PdM-Manager</h5>
        </div>
        <button class="sidebar-toggle">
          <i class="fas fa-bars"></i>
        </button>
        </div>
        
      <div class="sidebar-menu">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a href="#dashboard" class="nav-link active">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#configuracion" class="nav-link">
              <i class="fas fa-wrench"></i>
              <span>Configuración</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#simulacion" class="nav-link">
              <i class="fas fa-play-circle"></i>
              <span>Simulación</span>
            </a>
          </li>
        </ul>
          </div>
          
      <div class="sidebar-footer">
        <div class="system-status">
          <div class="status-title">Estado del Sistema</div>
          <div class="status-indicator">
            <div class="status-dot connected"></div>
            <div class="status-text">Sistema conectado</div>
          </div>
          <div class="text-muted mt-2" style="font-size: 0.8rem;">
            <i class="far fa-clock mr-1"></i> Última actualización: 
            <span id="lastUpdateTime">00:00:00</span>
        </div>
      </div>
      </div>
    </div>
    
    <!-- Contenido Principal -->
    <div class="main-content">
      <!-- Header -->
      <div class="content-header">
        <button class="btn btn-light btn-sm mobile-menu-toggle mr-2 d-lg-none">
          <i class="fas fa-bars"></i>
        </button>
        
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#dashboard">Inicio</a></li>
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </nav>
        
        <div class="header-actions">
          <button id="refreshDataBtn" class="btn btn-outline-primary btn-sm">
            <i class="fas fa-sync-alt mr-1"></i> Actualizar
            </button>
          </div>
        </div>
      
      <!-- Contenedor de Secciones -->
      <div class="content-sections">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section active">
          <div class="section-header">
            <h2><i class="fas fa-tachometer-alt mr-2 text-primary"></i>Dashboard</h2>
            <p class="text-muted">Monitoreo en tiempo real de sensores y alertas</p>
      </div>
      
          <!-- Filtros -->
          <div class="card filter-card mb-4">
            <div class="card-body">
              <h5 class="card-title"><i class="fas fa-filter"></i> Filtros</h5>
        <div class="row">
                <div class="col-md-4 mb-3">
                  <label for="selectMachine">Máquina:</label>
                  <select id="selectMachine" class="form-control">
                    <option value="">Todas las máquinas</option>
                  </select>
            </div>
                <div class="col-md-4 mb-3">
                  <label for="selectSensor">Sensor:</label>
                  <select id="selectSensor" class="form-control">
                    <option value="">Todos los sensores</option>
                  </select>
                </div>
                <div class="col-md-4 mb-3">
                  <label for="timeRange">Rango de tiempo:</label>
                  <select id="timeRange" class="form-control">
                    <option value="1h">Última hora</option>
                    <option value="6h">Últimas 6 horas</option>
                    <option value="24h" selected>Últimas 24 horas</option>
                    <option value="7d">Últimos 7 días</option>
                  </select>
                </div>
              </div>
          </div>
        </div>
        
          <!-- Tarjetas de Alertas -->
          <div class="row mb-4">
            <div class="col-xl-3 col-md-6 mb-3">
              <div class="alert-card level-1">
              <div class="card-body">
                  <div class="alert-icon">
                    <i class="fas fa-exclamation-circle"></i>
                  </div>
                  <div class="alert-info">
                    <h2 class="alert-count" id="level1Count">0</h2>
                    <p class="alert-label">Alertas Nivel 1</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6 mb-3">
              <div class="alert-card level-2">
              <div class="card-body">
                  <div class="alert-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                  </div>
                  <div class="alert-info">
                    <h2 class="alert-count" id="level2Count">0</h2>
                    <p class="alert-label">Alertas Nivel 2</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6 mb-3">
              <div class="alert-card level-3">
                <div class="card-body">
                  <div class="alert-icon">
                    <i class="fas fa-radiation-alt"></i>
          </div>
                  <div class="alert-info">
                    <h2 class="alert-count" id="level3Count">0</h2>
                    <p class="alert-label">Alertas Nivel 3</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6 mb-3">
              <div class="alert-card total">
              <div class="card-body">
                  <div class="alert-icon">
                    <i class="fas fa-bell"></i>
                  </div>
                  <div class="alert-info">
                    <h2 class="alert-count" id="totalCount">0</h2>
                    <p class="alert-label">Total Alertas</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Gráfico de Vibraciones -->
          <div class="row mb-4">
            <div class="col-lg-8 mb-3">
              <div class="card chart-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5><i class="fas fa-chart-line"></i> Tendencia de Vibraciones</h5>
                  <div class="btn-group btn-group-sm">
                    <button class="btn btn-outline-secondary" id="zoomResetBtn">
                      <i class="fas fa-sync-alt"></i>
                    </button>
                  </div>
                  </div>
                <div class="card-body">
                  <div class="chart-container">
                    <canvas id="vibrationChart"></canvas>
                </div>
                  <div class="threshold-controls mt-3">
                    <div class="custom-control custom-switch mr-3">
                      <input type="checkbox" class="custom-control-input" id="showMean" checked>
                      <label class="custom-control-label" for="showMean">Media</label>
              </div>
                    <div class="custom-control custom-switch mr-3">
                      <input type="checkbox" class="custom-control-input" id="show1Sigma" checked>
                      <label class="custom-control-label" for="show1Sigma">1σ</label>
            </div>
                    <div class="custom-control custom-switch mr-3">
                      <input type="checkbox" class="custom-control-input" id="show2Sigma" checked>
                      <label class="custom-control-label" for="show2Sigma">2σ</label>
          </div>
                    <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="show3Sigma" checked>
                      <label class="custom-control-label" for="show3Sigma">3σ</label>
        </div>
                  </div>
                </div>
              </div>
                </div>
            <div class="col-lg-4 mb-3">
              <div class="card chart-card h-100">
                <div class="card-header">
                  <h5><i class="fas fa-bell"></i> Alertas Recientes</h5>
                </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                    <thead>
                      <tr>
                          <th>Nivel</th>
                          <th>Sensor</th>
                          <th>Tiempo</th>
                      </tr>
                    </thead>
                      <tbody id="recentAlertsTable">
                        <tr>
                          <td colspan="3" class="text-center py-3">
                            <span class="text-muted">No hay alertas recientes</span>
                          </td>
                        </tr>
                    </tbody>
                  </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Datos Recientes -->
          <div class="row">
            <div class="col-12">
              <div class="card chart-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5><i class="fas fa-table"></i> Datos Recientes</h5>
                  <button class="btn btn-sm btn-outline-primary" id="exportDataBtn">
                    <i class="fas fa-download mr-1"></i> Exportar
                  </button>
              </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                      <thead>
                        <tr>
                          <th>Fecha/Hora</th>
                          <th>Máquina</th>
                          <th>Sensor</th>
                          <th>Valor X</th>
                          <th>Valor Y</th>
                          <th>Valor Z</th>
                          <th>Estado</th>
                        </tr>
                      </thead>
                      <tbody id="recentDataTable">
                        <tr>
                          <td colspan="7" class="text-center py-3">
                            <span class="text-muted">Cargando datos...</span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        
        <!-- Configuración Section -->
        <div id="configuracion-section" class="content-section">
          <div class="section-header">
            <h2><i class="fas fa-wrench mr-2 text-primary"></i>Configuración</h2>
            <p class="text-muted">Configuración de máquinas, sensores y modelos de predicción</p>
          </div>
          
              <div class="row">
            <div class="col-lg-5 mb-4">
              <!-- Panel de Máquinas -->
              <div class="card chart-card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5><i class="fas fa-industry"></i> Máquinas</h5>
                  <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#addMachineModal">
                    <i class="fas fa-plus mr-1"></i> Añadir
                  </button>
                  </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                      <thead>
                        <tr>
                          <th>Nombre</th>
                          <th>Tipo</th>
                          <th>Sensores</th>
                          <th>Acciones</th>
                        </tr>
                      </thead>
                      <tbody id="machinesTable">
                        <tr>
                          <td colspan="4" class="text-center py-3">
                            <span class="text-muted">Cargando máquinas...</span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                </div>
                  </div>
                  </div>
                </div>
                
            <div class="col-lg-7 mb-4">
              <!-- Panel de Sensores -->
              <div class="card chart-card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5><i class="fas fa-microchip"></i> Sensores</h5>
                  <div>
                    <select id="filterMachine" class="form-control form-control-sm mr-2 d-inline-block" style="width: auto;">
                      <option value="">Todas las máquinas</option>
                    </select>
                    <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#addSensorModal">
                      <i class="fas fa-plus mr-1"></i> Añadir
                    </button>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                      <thead>
                        <tr>
                          <th>Nombre</th>
                          <th>Máquina</th>
                          <th>Tipo</th>
                          <th>Ubicación</th>
                          <th>Modelo</th>
                          <th>Acciones</th>
                        </tr>
                      </thead>
                      <tbody id="sensorsTable">
                        <tr>
                          <td colspan="6" class="text-center py-3">
                            <span class="text-muted">Cargando sensores...</span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                  </div>
                </div>
              </div>
              
              <div class="row">
            <div class="col-lg-6 mb-4">
              <!-- Panel de Detalles del Sensor -->
              <div class="card chart-card">
                <div class="card-header">
                  <h5><i class="fas fa-info-circle"></i> Detalles del Sensor</h5>
                  </div>
                <div class="card-body">
                  <div id="sensorDetailsPlaceholder" class="text-center py-4">
                    <i class="fas fa-microchip text-muted" style="font-size: 3rem;"></i>
                    <p class="mt-3 text-muted">Seleccione un sensor para ver sus detalles</p>
                  </div>
                  <div id="sensorDetails" class="d-none">
                    <form id="sensorConfigForm">
                      <div class="form-group row">
                        <label class="col-sm-4 col-form-label">ID del Sensor:</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control-plaintext" id="sensorDetailId" readonly>
                  </div>
                  </div>
                      <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Máquina:</label>
                        <div class="col-sm-8">
                          <select class="form-control" id="sensorDetailMachine">
                            <option value="">Seleccionar máquina...</option>
                          </select>
                  </div>
                </div>
                      <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Nombre:</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control" id="sensorDetailName">
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Ubicación:</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control" id="sensorDetailLocation">
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Descripción:</label>
                        <div class="col-sm-8">
                          <textarea class="form-control" id="sensorDetailDescription" rows="3"></textarea>
                        </div>
                      </div>
                      <div class="text-right">
                        <button type="button" class="btn btn-primary" id="saveSensorConfigBtn">
                          <i class="fas fa-save mr-1"></i> Guardar Configuración
                        </button>
              </div>
            </form>
            </div>
                  </div>
                </div>
              </div>
              
            <div class="col-lg-6 mb-4">
              <!-- Panel de Modelos y Asociación -->
              <div class="card chart-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5><i class="fas fa-brain"></i> Modelo Asignado</h5>
                  <div>
                    <button class="btn btn-sm btn-outline-primary mr-2" data-toggle="modal" data-target="#addModelModal">
                      <i class="fas fa-plus mr-1"></i> Nuevo Modelo
                    </button>
                    <button class="btn btn-sm btn-outline-info" data-toggle="modal" data-target="#addScalerModal">
                      <i class="fas fa-plus mr-1"></i> Nuevo Scaler
                    </button>
                  </div>
                </div>
                  <div class="card-body">
                  <div id="modelDetailsPlaceholder" class="text-center py-4">
                    <i class="fas fa-brain text-muted" style="font-size: 3rem;"></i>
                    <p class="mt-3 text-muted">Seleccione un sensor para ver el modelo asignado</p>
                  </div>
                  <div id="modelDetails" class="d-none">
                    <div id="noModelAssigned" class="alert alert-warning">
                      <i class="fas fa-exclamation-triangle mr-2"></i>
                      No hay un modelo asignado a este sensor
                </div>
                    <form id="assignModelForm">
                      <div class="form-group">
                        <label for="selectModel">Modelo:</label>
                        <select class="form-control" id="selectModel">
                          <option value="">Seleccionar modelo...</option>
                        </select>
              </div>
                      <div class="form-group">
                        <label for="selectScaler">Scaler:</label>
                        <select class="form-control" id="selectScaler">
                          <option value="">Seleccionar scaler...</option>
                        </select>
                      </div>
                      <div class="text-right">
                        <button type="button" class="btn btn-primary" id="assignModelBtn">
                          <i class="fas fa-link mr-1"></i> Asignar Modelo
                        </button>
                      </div>
                    </form>
                    
                    <div id="currentModelInfo" class="mt-4 d-none">
                      <h6 class="border-bottom pb-2">Modelo Actualmente Asignado</h6>
                      <div class="row">
                        <div class="col-sm-4 font-weight-bold">Modelo:</div>
                        <div class="col-sm-8" id="currentModelName">-</div>
                  </div>
                      <div class="row mt-2">
                        <div class="col-sm-4 font-weight-bold">Tipo:</div>
                        <div class="col-sm-8" id="currentModelType">-</div>
                </div>
                      <div class="row mt-2">
                        <div class="col-sm-4 font-weight-bold">Scaler:</div>
                        <div class="col-sm-8" id="currentScalerName">-</div>
              </div>
                      <div class="row mt-2">
                        <div class="col-sm-4 font-weight-bold">Precisión:</div>
                        <div class="col-sm-8" id="currentModelAccuracy">-</div>
            </div>
                      <div class="row mt-2">
                        <div class="col-sm-4 font-weight-bold">Fecha Asignación:</div>
                        <div class="col-sm-8" id="currentModelDate">-</div>
          </div>
                      <div class="text-right mt-3">
                        <button type="button" class="btn btn-sm btn-danger" id="removeModelBtn">
                          <i class="fas fa-unlink mr-1"></i> Desasignar
                        </button>
        </div>
          </div>
                </div>
              </div>
            </div>
            </div>
          </div>
        </div>
        
        <!-- Simulación Section -->
        <div id="simulacion-section" class="content-section">
          <div class="section-header">
            <h2><i class="fas fa-play-circle mr-2 text-primary"></i>Simulación</h2>
            <p class="text-muted">Simulación de datos para pruebas y demostraciones</p>
      </div>

        <div class="row">
            <div class="col-lg-5 mb-4">
              <!-- Panel de Archivos CSV -->
              <div class="card chart-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5><i class="fas fa-file-csv"></i> Archivos CSV</h5>
                  <button class="btn btn-sm btn-primary" id="uploadCsvBtn">
                    <i class="fas fa-upload mr-1"></i> Subir CSV
                  </button>
                  </div>
                <div class="card-body">
                  <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                      <thead>
                        <tr>
                          <th>Nombre</th>
                          <th>Tamaño</th>
                          <th>Registros</th>
                          <th>Acciones</th>
                        </tr>
                      </thead>
                      <tbody id="csvFilesTable">
                        <tr>
                          <td colspan="4" class="text-center py-3">
                            <span class="text-muted">Cargando archivos...</span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                </div>
              </div>
              </div>
            </div>
            
            <div class="col-lg-7 mb-4">
              <!-- Panel de Configuración de Simulación -->
              <div class="card chart-card">
                <div class="card-header">
                  <h5><i class="fas fa-cogs"></i> Configuración de Simulación</h5>
                </div>
              <div class="card-body">
                  <form id="simulationConfigForm">
                    <div class="form-group row">
                      <label class="col-sm-4 col-form-label">Archivo CSV:</label>
                      <div class="col-sm-8">
                        <select class="form-control" id="selectCsvFile" required>
                          <option value="">Seleccionar archivo...</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-sm-4 col-form-label">Sensor:</label>
                      <div class="col-sm-8">
                        <select class="form-control" id="simSelectSensor" required>
                          <option value="">Seleccionar sensor...</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-sm-4 col-form-label">Intervalo (ms):</label>
                      <div class="col-sm-8">
                        <input type="number" class="form-control" id="simInterval" min="100" value="1000" required>
                        <small class="form-text text-muted">Tiempo entre registros (milisegundos)</small>
                  </div>
                      </div>
                    <div class="form-group row">
                      <div class="col-sm-4"></div>
                      <div class="col-sm-8">
                        <div class="custom-control custom-switch">
                          <input type="checkbox" class="custom-control-input" id="loopSimulation">
                          <label class="custom-control-label" for="loopSimulation">Repetir al finalizar</label>
                    </div>
                      </div>
                    </div>
                    <div class="text-right">
                      <button type="button" class="btn btn-success" id="startSimBtn" disabled>
                        <i class="fas fa-play mr-1"></i> Iniciar Simulación
                      </button>
                      <button type="button" class="btn btn-danger" id="stopSimBtn" disabled>
                        <i class="fas fa-stop mr-1"></i> Detener
                      </button>
                    </div>
                  </form>
                </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="row">
            <div class="col-12 mb-4">
              <!-- Panel de Estado de Simulación -->
              <div class="card chart-card">
                <div class="card-header">
                  <h5><i class="fas fa-chart-bar"></i> Estado de la Simulación</h5>
                    </div>
                <div class="card-body">
                  <div id="simulationStatusPlaceholder" class="text-center py-4">
                    <i class="fas fa-play-circle text-muted" style="font-size: 3rem;"></i>
                    <p class="mt-3 text-muted">No hay simulación en curso</p>
                  </div>
                  
                  <div id="simulationStatus" class="d-none">
                    <div class="row mb-4">
                      <div class="col-md-3 mb-3">
                        <div class="card bg-light">
                          <div class="card-body text-center py-3">
                            <h6 class="text-muted mb-2">Archivo</h6>
                            <h5 id="simStatusFile" class="mb-0">-</h5>
                  </div>
                </div>
                      </div>
                      <div class="col-md-3 mb-3">
                        <div class="card bg-light">
                          <div class="card-body text-center py-3">
                            <h6 class="text-muted mb-2">Sensor</h6>
                            <h5 id="simStatusSensor" class="mb-0">-</h5>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3 mb-3">
                        <div class="card bg-light">
                          <div class="card-body text-center py-3">
                            <h6 class="text-muted mb-2">Intervalo</h6>
                            <h5 id="simStatusInterval" class="mb-0">-</h5>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-3 mb-3">
                        <div class="card bg-light">
                          <div class="card-body text-center py-3">
                            <h6 class="text-muted mb-2">Estado</h6>
                            <h5 id="simStatusState" class="mb-0">-</h5>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="row mb-3">
                    <div class="col-md-6">
                        <h6>Progreso</h6>
                        <div class="progress" style="height: 20px;">
                          <div id="simProgressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                              </div>
                        <div class="d-flex justify-content-between mt-1">
                          <small><span id="simCurrentRecord">0</span> registros procesados</small>
                          <small>Total: <span id="simTotalRecords">0</span> registros</small>
                            </div>
                          </div>
                      <div class="col-md-6">
                        <h6>Tiempo</h6>
                        <div class="row">
                          <div class="col-6">
                            <div class="card bg-light">
                              <div class="card-body text-center py-2">
                                <small class="text-muted">Transcurrido</small>
                                <h5 id="simElapsedTime" class="mb-0">00:00:00</h5>
                        </div>
                      </div>
                          </div>
                          <div class="col-6">
                            <div class="card bg-light">
                              <div class="card-body text-center py-2">
                                <small class="text-muted">Restante</small>
                                <h5 id="simRemainingTime" class="mb-0">00:00:00</h5>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                    <div class="row">
                      <div class="col-md-4">
                        <div class="card border-warning">
                          <div class="card-body text-center py-3">
                            <h6 class="text-muted mb-2">Alertas Nivel 1</h6>
                            <h3 id="simAlerts1" class="text-warning mb-0">0</h3>
                      </div>
                    </div>
                  </div>
                      <div class="col-md-4">
                        <div class="card border-danger">
                          <div class="card-body text-center py-3">
                            <h6 class="text-muted mb-2">Alertas Nivel 2</h6>
                            <h3 id="simAlerts2" class="text-danger mb-0">0</h3>
                </div>
              </div>
            </div>
                      <div class="col-md-4">
                        <div class="card border-danger">
                          <div class="card-body text-center py-3" style="background-color: rgba(220, 53, 69, 0.05);">
                            <h6 class="text-muted mb-2">Alertas Nivel 3</h6>
                            <h3 id="simAlerts3" class="text-danger mb-0">0</h3>
          </div>
              </div>
                </div>
              </div>
            </div>
              </div>
                  </div>
                  </div>
                </div>
                  </div>
      </div>
                  </div>
                </div>
                
  <!-- Modales -->
  
  <!-- Modal de Confirmación -->
  <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="confirmModalLabel">Confirmar acción</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
        <div class="modal-body" id="confirmModalBody">
          ¿Está seguro que desea continuar con esta acción?
              </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="confirmModalBtn">Confirmar</button>
            </div>
          </div>
        </div>
  </div>
  
  <!-- Modal para añadir una máquina nueva -->
  <div class="modal fade" id="addMachineModal" tabindex="-1" aria-labelledby="addMachineModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addMachineModalLabel">Añadir Nueva Máquina</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
              </div>
        <div class="modal-body">
          <form id="addMachineForm">
            <div class="form-group">
              <label for="machineName">Nombre de la Máquina</label>
              <input type="text" class="form-control" id="machineName" required>
            </div>
            <div class="form-group">
              <label for="machineType">Tipo de Máquina</label>
              <select class="form-control" id="machineType" required>
                <option value="">Seleccionar tipo...</option>
                <option value="motor">Motor</option>
                <option value="pump">Bomba</option>
                <option value="fan">Ventilador</option>
                <option value="compressor">Compresor</option>
                <option value="generator">Generador</option>
                <option value="other">Otro</option>
                      </select>
                    </div>
            <div class="form-group">
              <label for="machineLocation">Ubicación</label>
              <input type="text" class="form-control" id="machineLocation" required>
                  </div>
            <div class="form-group">
              <label for="machineDescription">Descripción</label>
              <textarea class="form-control" id="machineDescription" rows="3"></textarea>
                  </div>
          </form>
                </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="saveMachineBtn">Guardar</button>
                    </div>
                    </div>
                  </div>
                    </div>
  
  <!-- Modal para añadir un sensor nuevo -->
  <div class="modal fade" id="addSensorModal" tabindex="-1" aria-labelledby="addSensorModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addSensorModalLabel">Añadir Nuevo Sensor</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                    </div>
        <div class="modal-body">
          <form id="addSensorForm">
            <div class="form-group">
              <label for="sensorMachine">Máquina</label>
              <select class="form-control" id="sensorMachine" required>
                <option value="">Seleccionar máquina...</option>
              </select>
                  </div>
            <div class="form-group">
              <label for="sensorName">Nombre del Sensor</label>
              <input type="text" class="form-control" id="sensorName" required>
                    </div>
            <div class="form-group">
              <label for="sensorType">Tipo de Sensor</label>
              <select class="form-control" id="sensorType" required>
                <option value="">Seleccionar tipo...</option>
                <option value="vibration">Vibración</option>
                <option value="temperature">Temperatura</option>
                <option value="pressure">Presión</option>
                <option value="flow">Flujo</option>
                <option value="other">Otro</option>
              </select>
                    </div>
            <div class="form-group">
              <label for="sensorLocation">Ubicación en la Máquina</label>
              <input type="text" class="form-control" id="sensorLocation" required>
                  </div>
            <div class="form-group">
              <label for="sensorDescription">Descripción</label>
              <textarea class="form-control" id="sensorDescription" rows="3"></textarea>
            </div>
                </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="saveSensorBtn">Guardar</button>
        </div>
              </div>
            </div>
          </div>
          
  <!-- Modal para añadir un modelo nuevo -->
  <div class="modal fade" id="addModelModal" tabindex="-1" aria-labelledby="addModelModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addModelModalLabel">Añadir Nuevo Modelo</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
              </div>
        <div class="modal-body">
          <form id="addModelForm">
            <div class="form-group">
              <label for="modelName">Nombre del Modelo</label>
              <input type="text" class="form-control" id="modelName" required>
              </div>
            <div class="form-group">
              <label for="modelType">Tipo de Modelo</label>
              <select class="form-control" id="modelType" required>
                <option value="">Seleccionar tipo...</option>
                <option value="anomaly_detection">Detección de Anomalías</option>
                <option value="classification">Clasificación</option>
                <option value="regression">Regresión</option>
                <option value="other">Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label for="modelFile">Archivo del Modelo</label>
              <div class="custom-file">
                <input type="file" class="custom-file-input" id="modelFile" required>
                <label class="custom-file-label" for="modelFile">Elegir archivo...</label>
          </div>
              <small class="form-text text-muted">Formatos soportados: .pkl, .h5, .joblib</small>
        </div>
            <div class="form-group">
              <label for="modelDescription">Descripción</label>
              <textarea class="form-control" id="modelDescription" rows="3"></textarea>
          </div>
          </form>
            </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="saveModelBtn">Guardar</button>
          </div>
        </div>
  </div>
</div>

  <!-- Modal para añadir un scaler nuevo -->
  <div class="modal fade" id="addScalerModal" tabindex="-1" aria-labelledby="addScalerModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
      <div class="modal-header">
          <h5 class="modal-title" id="addScalerModalLabel">Añadir Nuevo Scaler</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <form id="addScalerForm">
        <div class="form-group">
              <label for="scalerName">Nombre del Scaler</label>
              <input type="text" class="form-control" id="scalerName" required>
        </div>
            <div class="form-group">
              <label for="scalerType">Tipo de Scaler</label>
              <select class="form-control" id="scalerType" required>
                <option value="">Seleccionar tipo...</option>
                <option value="standard">StandardScaler</option>
                <option value="minmax">MinMaxScaler</option>
                <option value="robust">RobustScaler</option>
                <option value="other">Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label for="scalerFile">Archivo del Scaler</label>
              <div class="custom-file">
                <input type="file" class="custom-file-input" id="scalerFile" required>
                <label class="custom-file-label" for="scalerFile">Elegir archivo...</label>
              </div>
              <small class="form-text text-muted">Formatos soportados: .pkl, .joblib</small>
            </div>
            <div class="form-group">
              <label for="scalerDescription">Descripción</label>
              <textarea class="form-control" id="scalerDescription" rows="3"></textarea>
            </div>
          </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="saveScalerBtn">Guardar</button>
      </div>
      </div>
  </div>
</div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="spinner-container">
      <div class="spinner-border text-light mb-2" role="status" style="width: 3rem; height: 3rem;">
        <span class="sr-only">Cargando...</span>
      </div>
      <div id="loadingText" class="text-light">Procesando...</div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@1.2.1/dist/chartjs-plugin-zoom.min.js"></script>
  <script src="js/navigation.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>
