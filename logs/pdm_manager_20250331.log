[2025-03-31 18:01:06] [INFO] [logger:65] - Modelo cargado correctamente desde: C:\Users\LENOVO\Desktop\PdM-Manager\Modelo\modeloRNN_multiclase_v3_finetuned.h5
[2025-03-31 18:01:06] [INFO] [logger:65] - Escalador cargado correctamente con joblib desde: C:\Users\LENOVO\Desktop\PdM-Manager\Scaler\scaler_RNN_joblib.pkl
[2025-03-31 18:01:06] [INFO] [logger:65] - Límites de vibración ya existentes en la base de datos
[2025-03-31 18:01:06] [INFO] [logger:65] - Valores actuales X: -2.36/2.18/-3.5/3.32
[2025-03-31 18:01:06] [INFO] [logger:65] - Valores actuales Y: 7.18/12.09/5.95/13.32
[2025-03-31 18:01:06] [INFO] [logger:65] - Valores actuales Z: -2.39/1.11/-3.26/1.98
[2025-03-31 18:01:06] [INFO] [logger:65] - Iniciando aplicación PdM-Manager API
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/sensors desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Obteniendo lista de sensores: skip=0, limit=100
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/sensors procesada en 0.0169s
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/models desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/config/limits desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 404 para GET /api/config/limits procesada en 0.0030s
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/sensors desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/machines desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Obteniendo lista de sensores: skip=0, limit=100
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/models procesada en 0.0204s
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/sensors procesada en 0.0117s
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/models desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/sensors desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Obteniendo lista de sensores: skip=0, limit=100
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/models procesada en 0.0093s
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/sensors procesada en 0.0103s
[2025-03-31 18:01:06] [INFO] [logger:65] - Solicitud GET /api/models desde 127.0.0.1
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/models procesada en 0.0070s
[2025-03-31 18:01:06] [INFO] [logger:65] - Respuesta 200 para GET /api/machines procesada en 0.1772s
[2025-03-31 18:01:07] [INFO] [logger:65] - Solicitud GET /api/sensors desde 127.0.0.1
[2025-03-31 18:01:07] [INFO] [logger:65] - Obteniendo lista de sensores: skip=0, limit=100
[2025-03-31 18:01:07] [INFO] [logger:65] - Respuesta 200 para GET /api/sensors procesada en 0.0050s
[2025-03-31 18:01:12] [INFO] [logger:65] - Solicitud DELETE /api/machines/undefined desde 127.0.0.1
[2025-03-31 18:01:12] [ERROR] [logger:50] - ERROR: [{'type': 'int_parsing', 'loc': ('path', 'machine_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'undefined', 'url': 'https://errors.pydantic.dev/2.5/v/int_parsing'}]
CONTEXTO: {'endpoint': '/api/machines/undefined', 'método': 'DELETE', 'errores': [{'type': 'int_parsing', 'loc': ('path', 'machine_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'undefined', 'url': 'https://errors.pydantic.dev/2.5/v/int_parsing'}]}
TRACEBACK: Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 272, in app
    raise RequestValidationError(_normalize_errors(errors), body=body)
fastapi.exceptions.RequestValidationError: [{'type': 'int_parsing', 'loc': ('path', 'machine_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'undefined', 'url': 'https://errors.pydantic.dev/2.5/v/int_parsing'}]

[2025-03-31 18:01:12] [INFO] [logger:65] - Respuesta 422 para DELETE /api/machines/undefined procesada en 0.0116s
[2025-03-31 18:01:21] [INFO] [logger:65] - Solicitud DELETE /api/models/4 desde 127.0.0.1
[2025-03-31 18:01:21] [ERROR] [logger:50] - ERROR: name 'Sensor' is not defined
CONTEXTO: Error no manejado en DELETE /api/models/4 después de 0.0039s
TRACEBACK: Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\middleware.py", line 27, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\main.py", line 1301, in delete_model_endpoint
    sensors = db.query(Sensor).filter(Sensor.model_id == model_id).all()
                       ^^^^^^
NameError: name 'Sensor' is not defined

[2025-03-31 18:01:21] [ERROR] [logger:50] - ERROR: name 'Sensor' is not defined
CONTEXTO: {'endpoint': '/api/models/4', 'método': 'DELETE', 'query_params': '', 'client': '127.0.0.1'}
TRACEBACK: Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\middleware.py", line 27, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\main.py", line 1301, in delete_model_endpoint
    sensors = db.query(Sensor).filter(Sensor.model_id == model_id).all()
                       ^^^^^^
NameError: name 'Sensor' is not defined

[2025-03-31 18:01:24] [INFO] [logger:65] - Solicitud DELETE /api/models/5 desde 127.0.0.1
[2025-03-31 18:01:24] [ERROR] [logger:50] - ERROR: name 'Sensor' is not defined
CONTEXTO: Error no manejado en DELETE /api/models/5 después de 0.0044s
TRACEBACK: Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\middleware.py", line 27, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\main.py", line 1301, in delete_model_endpoint
    sensors = db.query(Sensor).filter(Sensor.model_id == model_id).all()
                       ^^^^^^
NameError: name 'Sensor' is not defined

[2025-03-31 18:01:24] [ERROR] [logger:50] - ERROR: name 'Sensor' is not defined
CONTEXTO: {'endpoint': '/api/models/5', 'método': 'DELETE', 'query_params': '', 'client': '127.0.0.1'}
TRACEBACK: Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\middleware.py", line 27, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\venv\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\LENOVO\Desktop\PdM-Manager\app\main.py", line 1301, in delete_model_endpoint
    sensors = db.query(Sensor).filter(Sensor.model_id == model_id).all()
                       ^^^^^^
NameError: name 'Sensor' is not defined

